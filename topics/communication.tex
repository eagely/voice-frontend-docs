\renewcommand*\chapterpagestyle{scrheadings}
\chapter{Communication}

Communication between frontend and backend is realized using a TCP socket.

The backend creates a local TCP socket on port 8080, and listens for clients.
Currently only one client at a time is supported, but work is being done on making the whole thing async.
The backend currently responds to two commands, \texttt{START\_RECORDING} and \texttt{STOP\_RECORDING}, returning either the
output produced by the voice assistant or an error, which is then displayed in the frontend.

\begin{minted}{rust}
let response = match line.trim() {
    "START_RECORDING" => {
        self.recorder.start()?;
        recording_active = true;
        "Recording started.".to_string()
    }
    "STOP_RECORDING" if recording_active => {
        let audio = self.recorder.stop()?;
        recording_active = false;
        self.transcriber.transcribe(&audio).await?
    }
    "STOP_RECORDING" => "No recording in progress.".to_string(),
    _ => "Unknown command.".to_string(),
};

writeln!(writer, "{}", response)?;
\end{minted}
